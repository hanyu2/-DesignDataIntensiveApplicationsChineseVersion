如果在最近的几年你做过软件开发，尤其是服务器端和后端系统工作过，你可能对这些有关存储了数据处理的名词已经听出了老茧。NoSQL！大数据！ Web-scale！ 分片！ 最终一致性！ ACID！ CAP 定理！云服务！MapReduce!！实时！

在过去的十年间，我们在数据库，分布式系统，和在此基础上的开发的应用方向看到了很对有意思的发展。有这几个原因在推动着这些发展：

- 互联网公司例如谷歌， 雅虎!，亚马逊，脸书，领英，微软和推特在处理着大量的数据和流量，所以一直在推动着他们创造新的工具去提高效率来应对如此大的规模

- 公司业务要更加敏锐高效，降低落地实验成本，通过维持较短的开发迭代周期和灵活的数据模型来洞悉市场，才能更快地对新兴市场作出反应
- 免费和开源的软件获得了巨大的成功，他们现在在很多地方比商业或者定制化软件更受欢迎
- CPU主频速度增长吃力，但是多核处理器已经成为标准，网络速度也变得越来越快。这意味着并行处理会越来越流行
- 在像AWS这样的IaaS的帮助下，即使你在一个很小的组里工作，你仍然可以穿件一个分布在很多机器上甚至横跨很大地理区域的西贡
- 很多服务现在的要求是高可用的，由于断电或者运维导致的更长宕机事件越来越让人难以接受

数据密集型应用正在利用这些技术扩展其领地。如果数据的数量，复杂度，或者数据更新速度是一个软件的主要挑战，我们可以把这个软件看作是数据密集型，与此相反的是CPU是主要瓶颈，我们可以叫做运算密集型软件

帮助数据密集型软件存储和处理的工具和技术正在迅速适应这些改变。新型数据库系统（“NoSQL”）已经引起了很多注意，但是与批处理或数据流相关的消息队列，缓存，索引和框架也十分重要。很多应用在综合术用这些技术。

这些眼花缭乱的词汇显示了人们对新兴事物的巨大热情，这是一件好事。但是作为软件工程师和架构师，如果我们像构建一个很好的应用，我们同样需要有技术的敏锐度和对各种技术和他们的优缺点的清醒认识。想要做到这些，我们需要深挖这些眼花缭乱的词汇。

庆幸的是，在技术迅速发展的背后，不管你在用那种版本的技术，很多久经考验的原则也从未改变。如果你理解这些原则，你可以清楚地知道这些技术应该应用在哪，如何正确使用，如何避免陷阱。这就是这本书的出发点。

这本书的目的是帮助你在迷乱的和迅速变革的数据处理，存储的技术中寻找方向。这本书并不是一门技术的教程，也不是充满冗长枯燥理论的教科书，而是我们能看到成功数据系统的范例，例如那些受欢迎软件的基石，看他们是在每天的运行中满足扩展性，高性能，高可用性。

我们同样也会深挖这些系统的内在，抽丝剥茧他们的关键算法，讨论他们的准则和取舍。在这个旅程中，我们会尝试学习有效思考一个数据系统的方法，不仅仅是他们是如何运行的，而是他们为什么是那样运行的，以及我们对这些系统能有什么样的疑问。

读完这本书之后，你会在知道如何应用一项技术来满足其需求，理解各种工具是如何相互配合来成为支持一个系统的底层架构。你无法从0开始写一个数据库存储隐形，其实幸运的是那也并没必要。但是你会对应的系统背后的运行原理培养出一种很好的直觉，你会分析他们的运行过程，作出好的设计决断，处理海其中数显的问题。

# 谁应该读这本书

如果你开发的系统涉及服务端/后端的数据存储和处理，并且你的系统会用到网络（比如网站程序，手机程序或者互联网传感器），那么这本你书就是为你应运而生的。

这本书针对那些热爱写代码的工程师架构师和技术经理。尤其是你需要在你你开发的系统做出架构上的决断的时候，比如你需要选择一种工具去解决一个问题，然后理清如何最好地应用这个工具。但是即使你在工具选择上没有其他更多选项，这本书仍然可以帮助你了解他们的优缺点。

你已经在创建web应用或者网络应用上有以下经验，也应该熟悉关系型数据库和SQL。你知道非关系型数据库和其他数据相关的工具是一个加分项，但并非必要。对于常见网络协议像TCP，HTTP有一个大致的了解会很有帮助。你的编程语言，架构的偏好对读这本书并没关联。

如果你符合以下几种情况，这本书会对你非常有用：

- 你想学习数据系统的扩展能力，比如支持百万级别的web应用或者手机应用
- 你需要让你的应用高可用（最小化不可用时间），让运行更加稳定
- 你正在探寻如何让一个应用无论在迭代，项目要求或者技术变更的条件下长期的更加简单的维护
- 你有对事物的运行和在线服务的内部有着天然的好奇心。这本书吧各种数据库和数据处理系统化整为零，你会被那些设计中智慧的思考吸引

有时候当我们讨论数据系统的扩展性，人们总会说：“你又不是谷歌或者亚马逊，别管那些扩展性，直接用关系型数据库就好了。” 这句话里有这一个事实：为不必要的扩展性设计是浪费时间的，那样会导致你不灵活的设计。其实，那只是一种不成熟的优化。但是，选择正确的工具同样重要，不同的技术有自己的优缺点。我们应该都看到的是，关系型数据库虽然很重要的但绝对不是数据处理的句号。

# 本书范围

这本书并不会尝试去给你事无巨细的教程如何去安装或者使用一种软件库或者API，因为类似的文档已经好入腌好。我们在这里是想讨论各种数据系统的基本准则和利弊权衡，并且讨论各种产品之间的设计取舍。

在这个电子版本里我们囊括了线上资源的完整链接。所有的链接在出版之时均已被验证可用，但是不幸的是这些链接经常会挂掉，如果你遇到一个挂掉的链接或者你在读这本书的影印版，你可以用搜索引擎找到这些饮用。对于学术饮用你可以在Google Scholar搜索文章标题来找到开源的PDF文件。除此之外你也可以在此找到本书全部的链接https://github.com/ept/ddia-references，我们会维护所有链接最新可用。

我们主要看的是数据系统的*架构*和他们被整合进密集型数据应用的方式。这本书没有多余的篇幅去设计部署，运维，安全，管理和其他方面——这些是很复杂也是很重要的领域，我们把他们放在前线的备注中对他们很不公平。他们更值得专业的书来介绍。

这本书中介绍的很多技术都是在*大数据*这个神秘的范畴内。但是“大数据”这个是被过度滥用并且定义不清，所以在严谨的工程讨论中并不实用。这本书减少了对模糊不清的名词的实用，不如单节点vs分布式系统或者在线/交互式vs离线/批处理。

这本书适合免费和开源软件，因为阅读，修改，执行源代码是了解一个事物运作的有效途径。开放的平台同样减少了软件提供商的垄断风险。但是在适当的地方，我们也会讨论专利软件（闭源软件，软件即服务SaaS，或者一些公司的在文献中描述过却未公开发布的内部软件）。

# 本书概览

本书被分成三大部分：

1. 在第一部分，我们会讨论支撑数据密集型应用的基本思想。在第一章，我们会讨论我们要实现的目标：可靠性，扩展性，和可维护性；我们如何思考他们和如何维护他们。在第二章，我们通过比较集中不同的数据模型和查询语言来看他们是如何适应各种不同的场景。在第三章，我们会讨论存储引擎：数据库是如何在磁盘上组织数据来方便我们更高效的查找。在第四章我们关注数据的编码格式（序列化）和数据schema的演化过程。
2. 在第二部分，我们会从单一节点存储的数据迈向分布式跨多机的数据存储。这对可扩展性通常是必要的，但是会带来各种不同的挑战。我们会先讨论数据复制（第五章），分区/分片（第六章），事物（第七章）。然后我们会更深入地研究分布式系统带来的问题（第八章）和分布式系统中实现一致性和共识的意义。
3. 在第三部分，我们会讨论一些从其他数据集派生出新数据集的系统。衍生数据通常在异构的系统中出现：当单一数据库无法很好完成所有任务，应用需要集成集中不同的数据库，缓存，索引等。在第十章，我们从用一种批处理来获得衍生数据开始，到在此基础上创造一个流处理系统（第十一章）。最终在第十二章，我们把所有的东西放在一起讨论在未来建造一个可靠的，可扩展的，可维护的应用的方法。

# 参考文献和引申阅读

我们在这本书中讨论的大部分内容都已经在别的地方讨论过了，有的是会议presentation，研究论文，博客，代码，bug跟踪，邮件列表，工程习惯。这门书总结了很多不同来源的重要思想，包括了指向原始文档的链接。如果你在一个领域想有更深入的探索，每章最后的参考文献会很有帮助，绝大多数都是在网上都是免费的。















